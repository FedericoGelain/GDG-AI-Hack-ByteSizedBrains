<!DOCTYPE html>
<html>
<head>
  <title>AI Web Modifier</title>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <div class="logo-container">
      <h1>AIuto</h1>
    </div>
    
    <div class="tabs">
      <button class="tab-button active" data-tab="modify">Modify</button>
      <button class="tab-button" data-tab="ask">Ask</button>
      <button class="tab-button" data-tab="history">History</button>
      <button class="tab-button" data-tab="settings">Settings</button>
    </div>
    
    <div id="modifyTab" class="panel active">
      <div class="input-section">
        <div class="input-with-mic">
          <textarea id="userPrompt" placeholder="Describe how you want to modify the current web page..."></textarea>
          <button id="modifyMicButton" class="mic-button">
            <svg class="mic-icon" viewBox="0 0 24 24" width="24" height="24">
              <path fill="currentColor" d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
              <path fill="currentColor" d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
            </svg>
          </button>
        </div>
        <button id="modifyButton">Modify Page</button>
      </div>
      
      <div id="modifyStatusMessage" class="status-message" style="display: none;"></div>
    </div>
    
    <div id="askTab" class="panel">
      <div class="input-section">
        <div class="input-with-mic">
          <textarea id="userQuestion" placeholder="Ask a question about the current web page..."></textarea>
          <button id="questionMicButton" class="mic-button">
            <svg class="mic-icon" viewBox="0 0 24 24" width="24" height="24">
              <path fill="currentColor" d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
              <path fill="currentColor" d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
            </svg>
          </button>
        </div>
        <button id="askButton">Ask</button>
      </div>
      
      <div class="answer-container" style="display: none;">
        <div class="answer-text"></div>
      </div>
      
      <div id="askStatusMessage" class="status-message" style="display: none;"></div>
    </div>
    
    <div id="historyTab" class="panel">
      <div class="history-section">
        <h2>Recent Prompts</h2>
        <ul id="promptHistory">
          <li class="empty-message">No history yet</li>
        </ul>
      </div>
      <div id="historyStatusMessage" class="status-message" style="display: none;"></div>
    </div>
    
    <div id="settingsTab" class="panel">
      <h2>Settings</h2>
      
      <div class="settings-section">
        <h3>API Configuration</h3>
        <div class="api-key-section">
          <div class="settings-row">
            <label for="geminiApiKey">Gemini API Key:</label>
            <input type="password" id="geminiApiKey" placeholder="AIza..." />
            <button id="saveGeminiKey" class="small-button">Save</button>
          </div>
        </div>
      </div>
      
      <div class="settings-section">
        <h3>Speech Recognition</h3>
        <div id="recognitionSystemIndicator" class="settings-status">
          Using: Local Speech Recognition
        </div>
      </div>
      
      <div id="settingsStatusMessage" class="status-message" style="display: none;"></div>
    </div>
    
    <div class="footer">
      <div class="version-info">v1.0.0</div>
      <a href="https://www.gdgaihack.com/" target="_blank" class="small-button">GDG AI Hack</a>
    </div>
    
    <button id="grantMicPermissionButton" class="small-button" style="margin-top: 12px;">
      Grant Microphone Permission
    </button>
  </div>
  
  <div id="permissionBanner" class="permission-banner" style="display: none;">
    <span>Microphone access is required for speech recognition</span>
    <button id="permissionButton" class="small-button">Enable Microphone</button>
  </div>
  
  <script src="popup.js"></script>
</body>
</html>